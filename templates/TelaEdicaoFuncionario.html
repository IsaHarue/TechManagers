{% extends "base.html" %}

{% block conteudo %}
<body>
    <link rel="stylesheet" href="../static/TelaEdicaoFuncionario.css">
    <main>
        <div class="container">
            <h2>EDIÇÃO DE FUNCIONARIO</h2>
            <form action="{{ url_for('TelaEF', id=funcionario.id) }}" method="post" id="editForm">
                <div class="input-group">
                    <label for="nome"><i class="fas fa-user"></i> NOME</label>
                    <input type="text" id="nome" name="nome" value="{{ funcionario.nome }}">
                </div>
                <div class="input-group">
                    <label for="email"><i class="fas fa-envelope"></i> EMAIL</label>
                    <input type="email" id="email" name="email" value="{{ funcionario.email }}">
                </div>
                <div class="input-group">
                    <label for="cpf"><i class="fas fa-id-card"></i> CPF</label>
                    <input type="number" id="cpf" name="cpf" value="{{ funcionario.cpf }}">
                </div>
                <div class="input-group">
                    <label for="senha"><i class="fas fa-lock"></i> SENHA</label>
                    <input type="text" id="senha" name="senha" value="{{ funcionario.senha }}">
                </div>
                <div class="btnS">
                    <button type="button" class="btnV" onclick="location.href='{{ url_for('telafuncionarios') }}'">VOLTAR</button>
                    <button type="submit" class="btn" id="editButton" disabled>EDITAR</button>
                </div>
            </form>
        </div>
    </main>

    <script>
        const editButton = document.getElementById('editButton');
        const editForm = document.getElementById('editForm');

        // Função para verificar alterações
        function checkFormChanges() {
            const originalValues = {
                nome: '{{ funcionario.nome }}',
                email: '{{ funcionario.email }}',
                cpf: '{{ funcionario.cpf }}',
                senha: '{{ funcionario.senha }}'
            };

            const nome = document.getElementById('nome').value;
            const email = document.getElementById('email').value;
            const cpf = document.getElementById('cpf').value;
            const senha = document.getElementById('senha').value;

            // Verifica se algum campo foi alterado
            editButton.disabled = !(
                nome !== originalValues.nome ||
                email !== originalValues.email ||
                cpf !== originalValues.cpf ||
                senha !== originalValues.senha
            );
        }

        // Adiciona evento de input a cada campo
        editForm.addEventListener('input', checkFormChanges);
    </script>
</body>
{% endblock %}
